#!/bin/bash

# URL do site a ser monitorado
SITE_URL="http://COLE O IP DA SUA MAQUINA AQUI/"

# Webhook do Discord
DISCORD_WEBHOOK_URL="COLE A URL DO SEU WEBHHOK AQUI"

# Arquivo de log
LOG_FILE="/var/log/monitoramento.log"  # Corrigido o caminho para o diret칩rio completo

DATE=$(date "+%Y-%m-%d %H:%M:%S")

# Verifica se o site est치 acess칤vel
HTTP_STATUS=$(curl -s --head --request GET "$SITE_URL" | grep HTTP | awk '{print $2}')

# Verifica se o c칩digo de status HTTP est치 entre 200 e 399 (site acess칤vel)
if [[ "$HTTP_STATUS" -ge 200 && "$HTTP_STATUS" -le 399 ]]; then
    echo "$DATE: O site est치 online." >> "$LOG_FILE"
else
    echo "$DATE: O site est치 fora do ar! Enviando alerta para o Discord." >> "$LOG_FILE"

    # Mensagem JSON para o Discord
    JSON_PAYLOAD=$(cat <<EOF
{
  "username": "Monitor de Site",
  "content": "游뚿 O site **$SITE_URL** est치 fora do ar! 游뚿"
}
EOF
)

    # Envia alerta para o Discord
    curl -H "Content-Type: application/json" -X POST -d "$JSON_PAYLOAD" "$DISCORD_WEBHOOK_URL"
fi



